# C언어 6월 4일

### 1. CPU
- CPU는 코드 영역을 순차적으로 읽어 명령을 수행하는 하드웨어다.
- IF / ID / EX / MEM / WB라는 단계로 이루어진다 들었는데, 자세하게는 다루지 않았다.
- CPU의 구성은 다음과 같다.
    - 코어 : 인간의 뇌랑 같다고 보면 된다. 코어가 2개라는건 뇌가 2개라는 뜻과 동일하다.
        - 클럭 : 높을수록 보통 빠르다고 한다. 0-1을 반복하는 속도를 결정한다.
        - 스레드 : 프로그램 실행의 최소 단위이다. 프로그램은 최소 하나의 스레드를 가진다.
    - 캐시 : 램과 비슷한 역할을 하는 휘발성 메모리다.
        - CPU에 가까울 수록 속도가 빠른데, 캐시는 CPU에서 가장 가까운 저장 장치라 볼 수 있다.
        - L1, L2, L3와 같이 복층 구조로 만들어 가격과 성능 사이의 밸런스를 맞추고 있다.

---

### 2. 램
- 휘발성 메모리이며, 프로그램을 사용하기 위해 필요한 자료들을 올려놓는 임시 공간이라 할 수 있다.
    - Type : DDR3, 4등으로 네이밍되어 있으며, 기술이다.
    - Size : 용량, 4GB, 8GB등등 있다.
    - DRAM Frequency : 램의 클럭이다. CPU처럼 응답속도가 존재한다.

- 램과 CPU는 다음과 같은 관계를 가진다
    - CPU는 정보가 필요하면 그 정보를 RAM에 적재한다.
    - 즉, RAM은 CPU가 필요로 하는 정보를 저장하는 것이다.

- 문제
    - 1. 램의 용량이 부족한 상황에서 프로그램을 돌리면?
        - swap파일을 사용하게 되거나, 다른 프로그램의 메모리를 최대한 회수한다.
        - 그런데, 이 비용이 굉장히 비싸 속도가 매우 느려진다.
    - 2. 무한반복같은 구문이 들어간 프로그램의 CPU 점유율은 얼마일까?
        - 코어 하나만큼만 돌아간다.
        - 코어 내의 하이퍼스레드 기술을 적용하면, 그 중 하나의 스레드만 돌아간다.
        - 멀티코어를 지원한다면 그 코어 수만큼의 점유율을 가진다.
    - 3. 멀티 코어를 사용할 시 RAM에 발생할 수 있는 문제는?
        - 0번 코어와 1번 코어가 동시에 같은 메모리에 접근할 때 어느 작업이 우선으로 끝나냐에 따라 결과가 달라진다.
        - 이를 임계 지역이라고 부르며, 이를 관리하기 위해 특수한 코드를 사용한다고 한다.

---

### 3. 그래픽카드
- 그래픽카드는 코어와 VRAM으로 나뉜다.
- VRAM은 말 그대로 그래픽카드가 쓰기 위한 자원을 저장하는 공간이다.
- 그래픽카드는 RAM보단, VRAM의 접근속도가 월등히 빠르기 때문에 공간을 따로 쓴다.
- 만약 VRAM을 전부 사용하면 RAM을 사용하는데, 이 경우엔 게임이 느려질 정도로 확연히 구분이 된다고 한다.
- 문제
    - CPU와 GPU의 차이점은?
        - CPU는 복잡한 연산을 할 수 있다. 그리고 if와 같은 실행코드 순서 변경에 대한 여러 기술이 있다.
        - 하지만 GPU는 간단한 사칙연산만을 할 수 있고, 코어가 엄청 많음에도 한가지 작업만 수행이 가능하다.
        - 그래서 GPU에 조건문이 들어가면 연산 속도가 급격하게 느려진다고 한다.

---

### 4. 윈도우 매모리 구조

- 윈도우는 기본적으로 커널 / 유저 메모리를 1:1로 나누어서 사용한다.
- 배우는 환경을 x86 native로 고정한다고 했으니, 4GB를 1:1로 나누어서 사용할 것이다.
    - 유저 : 0xxxxxxx ~ 7xxxxxxx
    - 커널 : 8xxxxxxx ~ Fxxxxxxx
- 유저 메모리를 더 자세하게 파면, 다음과 같다.
    - 0~3 : 유저 프로그램이 실제로 사용하는 공간, 유저 코드가 들어가 있다.
    - 4~7 : 유저 프로그램이 필요로 하는 DLL들이나 정보들이 올라가 있는 공간.